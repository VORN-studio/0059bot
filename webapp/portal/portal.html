<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domino Portal</title>
    <link rel="stylesheet" href="/portal/portal.css?v=1">
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="/portal/portal.js?v=4"></script>
</head>
<body>

<div id="portal-root">

    <!-- TOP BAR -->
<div class="portal-topbar">
    <button id="back-btn" class="back-btn">‚Üê</button>
    <div class="portal-title">Domino Portal</div>

    <div class="portal-user">
        <img id="user-avatar" src="default.png">
        <span id="username"></span>
    </div>
</div>
    <input type="file" id="avatar-input" accept="image/*" style="display:none">
    <!-- PROFILE SECTION -->
<div class="portal-profile">
    <div class="avatar-frame">
        <img id="profile-avatar" src="default.png">
    </div>
    <div class="follow-stats">
        <span id="followers-count">0 Followers</span> ‚Ä¢
        <span id="following-count">0 Following</span>
    </div>

    <div class="domino-star-stats">
        <span class="domino-star-animated">üëæ</span>
        <span id="profile-domino-stars">0</span>
        <span style="opacity:0.7;font-size:12px;">Domino Stars</span>
    </div>

    <div class="profile-info">
        <div id="profile-name" style="font-size: 18px; font-weight: bold;"></div>
        <div id="profile-status" style="opacity: 0.7; font-size: 13px;">Online</div>

        <button id="follow-btn">Follow</button>
    </div>
</div>


    <!-- MAIN TABS -->
    <div class="portal-tabs">
        <button class="tab-btn active" data-tab="feed">üì∞ Feed</button>
        <button class="tab-btn" data-tab="play">‚öîÔ∏è Play</button>
        <button class="tab-btn" data-tab="social">
            Social
            <span id="notify-social" class="notify-dot hidden"></span>
        </button>

        <button class="tab-btn" data-tab="profile">üíº Profile</button>
    </div>


    <!-- CONTENT AREA -->
    <div id="portal-content">

        

        <!-- FEED -->
        <div id="feed" class="tab-page active">

            <button id="back-to-feed"
                style="
                    display:none;
                    margin-bottom:10px;
                    padding:8px 14px;
                    border-radius:10px;
                    border:none;
                    background:#1f2937;
                    color:white;
                    cursor:pointer;
                    font-size:14px;
                ">
                ‚Üê ’é’•÷Ä’°’§’°’º’∂’°’¨ Feed
            </button>


            <h3>’Ä’∏’Ω’´’°÷Ü’´’§</h3>

            <!-- POST CREATOR -->
            <div id="post-creator">
                <textarea id="post-text"
                    placeholder="‘≥÷Ä’´’õ÷Ä ’¥’´ ’¢’°’∂‚Ä¶"
                    rows="3"></textarea>

                <div style="display:flex;gap:8px;margin-top:8px;">
                    <input type="file" id="post-media" accept="image/*,video/*" hidden>

                    <button id="media-btn" class="media-btn">
                        üìé Media
                    </button>

                    <button id="post-send">
                        Post
                    </button>
                </div>
            </div>

            <!-- FEED SWITCH -->
            <div id="feed-switch">
                <button class="feed-switch-btn active" data-feed="recommended">
                    ’å’•’Ø’∏’¥’•’∂’§
                </button>

                <button class="feed-switch-btn" data-feed="mine">
                    ‘ª’¥ ’£÷Ä’°’º’∏÷Ç’¥’∂’•÷Ä’®
                </button>
            </div>

            <!-- POSTS -->
            <div id="feed-list"></div>

        </div>


        <!-- PLAY (’∂’∏÷Ä container, ’§’•’º ’§’°’ø’°÷Ä’Ø) -->
        <div id="play" class="tab-page">
            <h3>‚öîÔ∏è Play</h3>

            <div class="play-grid">
                <div class="play-card">Duels</div>
                <div class="play-card">Leagues</div>
                <div class="play-card muted">Coming Soon</div>
            </div>
        </div>

        <!-- SOCIAL -->
        <div id="social" class="tab-page">
            <div class="social-tabs">
                <button class="sub-btn active" data-sub="users">Users</button>
                <button class="sub-btn" data-sub="messages">
                    Messages
                    <span id="notify-messages" class="notify-dot hidden"></span>
                </button>
                <button class="sub-btn" data-sub="chat">Global Chat</button>
            </div>

            <div id="users" class="sub-page active">

                <input id="user-search"
                    placeholder="’ì’∂’ø÷Ä’•’¨ username‚Ä¶"
                    style="width:100%;padding:10px;border-radius:10px;margin-bottom:10px;">

                <div id="users-list"></div>

            </div>
            <div id="messages" class="sub-page">

                <div id="pm-list"></div>

            </div>

            <div id="chat" class="sub-page">

                <div id="global-chat" class="chat-box">
    
                    <!-- ‚úÖ HOT USER DISPLAY -->
                    <div id="hot-user-banner" style="
                        display: flex;
                        padding: 10px;
                        background: linear-gradient(135deg, #1e3a8a, #7c3aed);
                        border-radius: 10px;
                        margin-bottom: 10px;
                        align-items: center;
                        gap: 10px;
                    ">
                        <img id="hot-user-avatar" src="/portal/default.png" 
                            style="width: 36px; height: 36px; border-radius: 50%;">
                        <div style="flex: 1;">
                            <div style="font-size: 11px; opacity: 0.8;">üî• Hot User</div>
                            <div id="hot-user-name" style="font-size: 14px; font-weight: bold;"></div>
                        </div>
                    </div>
                
                    <div id="global-messages" class="chat-messages"></div>

                    <div style="padding: 0 10px 4px; text-align: right;">
                        <span id="global-char-count" style="font-size: 11px; color: #888;">0/200</span>
                    </div>

                    <div style="display: flex; gap: 6px; align-items: center; padding: 0 10px 6px;">
                        <input type="checkbox" id="highlight-checkbox" style="display: none;">
                        <label id="highlight-label" for="highlight-checkbox" style="
                            display: none;
                            font-size: 11px;
                            color: #facc15;
                            cursor: pointer;
                            user-select: none;
                        ">‚≠ê Highlight (Status 7+)</label>
                    </div>

                    <div class="chat-input-row">
                        <input id="global-input" class="chat-input"
                            placeholder="Write to global chat..." />
                        <button id="global-fullscreen" class="chat-fullscreen-btn">‚õ∂</button>
                        <button id="global-send" class="chat-send-btn">Send</button>
                    </div>
                </div>

        </div>
        </div>

        <!-- PROFILE -->
        <div id="profile" class="tab-page">
            <div class="profile-actions">
                <div class="profile-card">Balance</div>
                <div class="profile-card">Packages</div>
                <div class="profile-card">Stats</div>
                <div id="settings-btn" class="settings-btn">‚öôÔ∏è Settings</div>
            </div>
        </div>

        </div>

</div>

<!-- ========================= PERSONAL CHAT ========================= -->
<div id="dm-chat" class="chat-box dm-overlay" style="display:none;">

    <!-- HEADER -->
    <div class="dm-header">

        <div class="dm-user-info">
            <img id="dm-avatar" src="/portal/default.png">
            <span id="dm-username"></span>
        </div>

        <button id="dm-close">‚úï</button>
    </div>


    <div id="dm-messages" class="chat-messages"></div>

    <div id="reply-box" style="
        display:none;
        padding:6px 10px;
        background:#111827;
        border-left:3px solid #3a8bff;
        font-size:12px;
        margin:6px;
        border-radius:8px;
    ">
        <span id="reply-text"></span>
        <span onclick="cancelReply()"
            style="float:right;cursor:pointer;opacity:0.6;">‚úï</span>
    </div>


    <div class="chat-input-row">
        <input id="dm-input" class="chat-input" placeholder="Write a message..." />
        <button id="dm-fullscreen" class="chat-fullscreen-btn">‚õ∂</button>
        <button id="dm-send" class="chat-send-btn">Send</button>
    </div>
</div>


<!-- Username Setup Popup -->
<div id="username-popup" class="popup hidden">
    <div class="popup-box">
        <h3>‘∏’∂’ø÷Ä’´÷Ä ÷Ö’£’ø’°’£’∏÷Ä’Æ’∏’≤’´ ’°’∂’∏÷Ç’∂</h3>
        <p>‘±’µ’Ω ’°’∂’∏÷Ç’∂’® ’Ø÷Ö’£’ø’°’£’∏÷Ä’Æ’æ’´ Domino Portal‚Äì’∏÷Ç’¥</p>

        <input id="username-input" type="text" placeholder="÷Ö÷Ä’´’∂’°’Ø’ù user1234">

        <button id="username-save">’ä’°’∞’∫’°’∂’•’¨</button>
    </div>
</div>
    <div id="settings-panel" class="settings-panel hidden">
    <div class="settings-box">
        <h2>Settings</h2>

        <button class="settings-item" id="change-avatar-open">
            ’ì’∏’≠’•’¨ Avatar
        </button>

        <button class="settings-item" id="change-username-open">
            ’ì’∏’≠’•’¨ Username
        </button>

        <div class="settings-item" style="display: flex; justify-content: space-between; align-items: center;">
            <span>‘π’∏÷Ç’µ’¨’°’ø÷Ä’•’¨ ’∞’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä’´ ’ø’°÷Ä’°’Æ’∏÷Ç’¥’®</span>
            <label class="toggle-switch">
                <input type="checkbox" id="allow-forward-toggle" checked>
                <span class="toggle-slider"></span>
            </label>
        </div>

        <button class="settings-close" id="settings-close">’ì’°’Ø’•’¨</button>
    </div>
</div>

    <div id="comment-drawer" class="drawer hidden">
        <div class="drawer-panel">

            <div class="drawer-header">
                <div id="comment-count">Comments</div>
                <button id="comment-close" class="drawer-close">‚úï</button>
            </div>

            <div id="comment-list" class="drawer-comments"></div>

            <div class="drawer-input-row">
                <textarea id="comment-input" placeholder="Write a comment..."></textarea>
                <button id="comment-send">Send</button>
            </div>

        </div>
    </div>
</div>

<!-- SHARE MODAL -->
<div id="share-modal" class="popup hidden">
    <div class="popup-box">

        <h3>’è’°÷Ä’°’Æ’•’¨ ÷É’∏’Ω’ø’®</h3>
        <p style="opacity:0.7;font-size:13px;">
            ‘∏’∂’ø÷Ä’´÷Ä ’∏÷Ä’ø’•’≤ ’ø’°÷Ä’°’Æ’•’¨
        </p>

        <div style="display:flex;flex-direction:column;gap:10px;margin:16px 0;">

            <button class="share-option-btn" id="share-dm">
                üë§ ’è’°÷Ä’°’Æ’•’¨ DM-’∏’æ
            </button>

            <button class="share-option-btn" id="share-global">
                üåç Global Chat
            </button>

            <button class="share-option-btn" id="share-copy">
                üìã ’ä’°’ø’≥’•’∂’•’¨ ’∞’≤’∏÷Ç’¥’®
            </button>

        </div>

        <button class="settings-close" onclick="closeShareModal()">
            ’ì’°’Ø’•’¨
        </button>

    </div>
</div>

<!-- DM SHARE POPUP -->
<div id="dm-share-popup" class="popup hidden">
  <div class="popup-box">

    <h3>’à÷Ç’≤’°÷Ä’Ø’•’¨ DM-’∏’æ</h3>
    <p style="opacity:0.7;font-size:13px;">
      ‘∏’∂’ø÷Ä’´÷Ä ÷Ö’£’ø’°’ø’•÷Ä’•÷Ä’´’∂
    </p>

    <div id="dm-share-list"
         style="max-height:260px;overflow-y:auto;margin:12px 0;">
    </div>

    <button id="dm-share-send"
        style="width:100%;padding:12px;
        background:#3a8bff;border:none;
        border-radius:12px;color:white;">
      ’à÷Ç’≤’°÷Ä’Ø’•’¨
    </button>

    <button class="settings-close"
        onclick="closeDMShare()">
      ’ì’°’Ø’•’¨
    </button>

  </div>
</div>

    <!-- FORWARD MODAL -->
    <div id="forward-modal" class="popup hidden">
        <div class="popup-box" style="width:80%;max-width:400px;padding:20px;">
            <h3 style="margin:0 0 16px 0;color:white;font-size:18px;">üì© Forward Message</h3>
            
            <div id="forward-target-list" style="max-height:300px;overflow-y:auto;margin-bottom:16px;">
                <!-- Dynamic list of users -->
            </div>
            
            <div style="display:flex;gap:10px;">
                <button id="forward-cancel" 
                    style="flex:1;padding:12px;border-radius:12px;
                    background:rgba(255,255,255,0.1);color:white;border:none;font-size:14px;">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- DELETE CONFIRM MODAL -->
    <div id="confirm-modal" class="popup hidden">
        <div class="popup-box">
            <h3 id="confirm-title">Confirm action</h3>
            <p id="confirm-text">Are you sure?</p>

            <div style="display:flex;gap:10px;margin-top:16px;">
                <button id="confirm-cancel"
                    style="flex:1;padding:10px;border-radius:12px;
                    background:rgba(255,255,255,0.1);color:white;border:none;">
                    Cancel
                </button>

                <button id="confirm-ok"
                    style="flex:1;padding:10px;border-radius:12px;
                    background:#e11d48;color:white;border:none;">
                    Delete
                </button>
            </div>
        </div>
    </div>

    <!-- MESSAGE CONTEXT MENU -->
    <div id="message-context-menu" class="popup hidden">
        <div class="popup-box" style="width:60%;padding:10px;">
            <button class="context-menu-btn" id="ctx-reply">
                ‚Ü©Ô∏è Reply
            </button>
            <button class="context-menu-btn" id="ctx-copy">
                üìã Copy
            </button>
            <button class="context-menu-btn" id="ctx-forward">
                üì© Forward
            </button>
            <button class="context-menu-btn" id="ctx-cancel" style="background:rgba(255,255,255,0.1);">
                ‚úï Cancel
            </button>
        </div>
    </div>

    <!-- Domino Star Modal -->
        <div id="domino-star-modal" class="popup hidden">
            <div class="popup-box domino-star-box">
                <div class="domino-star-header">
                    <div class="domino-star-icon-big"> üëæ </div>
                    <h3>Send Domino Star</h3>
                </div>
                
                <div class="domino-star-info">
                    <div class="domino-star-row">
                        <span>üí∞ Total Cost:</span>
                        <span class="domino-star-price">0.20 USD</span>
                    </div>
                </div>
                
                <div class="domino-star-balance">
                    Your Balance: <span id="domino-star-user-balance">0.00</span> USD
                </div>
                
                <div style="display:flex;gap:10px;margin-top:16px;">
                    <button class="domino-star-btn-cancel" onclick="closeDominoStarModal()">Cancel</button>
                    <button class="domino-star-btn-confirm" onclick="confirmDominoStar()">
                        <span style="font-size:16px;"> üëæ </span> Send
                    </button>
                </div>
            </div>
        </div>

</body>
</html>
